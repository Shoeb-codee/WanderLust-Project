<% layout("/layouts/boilerplate") %>
<% 
const validateEmail = (email) => {
    const regex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i;
    if (!regex.test(email)) {
      setEmailError("⚠️ Please enter a valid email address.");
    } else {
      setEmailError("");
    }
  }; %>
<div class="row mt-3">
  <!-- On small devices, full width; on medium & up, use half with offset -->
  <h1 class="col-12 text-center text-md-start"> SignUp on Wanderlust </h1>
  <div class="col-12 col-md-6 offset-md-3">
     <form method="post" action="/signup" novalidate class="needs-validation">
      <!-- USERNAME -->
        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input
            type="text"
            name="username"
            id="username"
            class="form-control"
            required
          />
          <div class="valid-feedback"> Looks Good!</div>
          <div class="invalid-feedback">Enter a Valid Username</div>
        </div>

        <!-- EMAIL -->
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input
            type="email"
            name="email"
            id="email"
            class="form-control"
            required
            onblur="validateEmail(this.value)"
          />
          <div class="invalid-feedback" id="emailError"></div>
        </div>

        <!-- PASSWORD -->
         <div class="mb-3">
          <label for="password" class="form-label">password</label>
          <input
            type="password"
            name="password"
            id="password"
            class="form-control"
            required
          />
        </div>
        <button class="btn btn-success">SignUp</button>
    </form>
  </div>
</div>

<script>
  function setEmailError(message) {
    const emailError = document.getElementById('emailError');
    const emailInput = document.getElementById('email');
    
    if (message) {
      emailError.textContent = message;
      emailInput.classList.add('is-invalid');
      emailInput.classList.remove('is-valid');
    } else {
      emailError.textContent = '';
      emailInput.classList.add('is-valid');
      emailInput.classList.remove('is-invalid');
    }
  }
</script>